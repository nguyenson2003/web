<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Nqson</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='https://fonts.googleapis.com/css?family=Patrick Hand'>
</head>

<body>
    <script>
        //tag p html
        const line1 = document.createElement("a");
        line1.innerText = "nqson game";
        const line1_css = line1.style;
        line1_css.fontSize = "30px";
        line1_css.background = "#00FF00";
        line1_css.textAlign = "left"
        document.body.appendChild(line1);
        endl();
        //tag p html
        const line2 = document.createElement("a");
        line2.innerText = "chuyển tất cả thành màu xanh để chiến thắng";
        const line2_css = line2.style;
        line2_css.fontSize = "22px";
        document.body.appendChild(line2);
        endl();
        //tag button html
        const game = [];
        const n = 4;
        for (i = 0; i < n; i++) {
            game.push([]);
            for (j = 0; j < n; j++) {
                const inp = document.createElement("div");
                inp.style.width='30px';
                inp.style.height='30px';
                inp.style.backgroundColor = 'cyan'
                inp.style.display = 'inline-block'
                inp.style.margin = '5px'
                inp.style.border = '2px gray solid'
                inp.onmouseup =  function(){
                    console.log(this);
                    myFunction(this);
                };
                inp.setAttribute("x",i);
                inp.setAttribute("y",j);
                document.body.appendChild(inp);
                game[i].push(inp);
            }
            endl();
        }
        game.forEach(arr => {
            arr.forEach(e => {
                if(Math.random().toFixed()==1) {
                    myFunction(e);
                }
            });
        });
        function myFunction(e) {
            let x = parseInt(e.getAttribute("x"));
            let y = parseInt(e.getAttribute("y"));
            change(game[x][y]);
            if(x>0) change(game[x-1][y]);
            if(y>0) change(game[x][y-1]);
            if(x<n-1) change(game[1+x][y]);
            if(y<n-1) change(game[x][1+y]);
            let count = 0;
            game.forEach(arr => {
                arr.forEach(e1 => {
                    if(e1.style.backgroundColor === 'cyan') count++;
                });
            });
            // if(e.checked) count--;
            // else count++;
            if(count==n*n){
                const win = document.createElement("a");
                win.innerText = "WIN!";
                win.id = "win";
                const win_css = win.style;
                win_css.color = "blue";
                win_css.fontSize = "22px";
                document.body.appendChild(win);
            }else{
                const temp = document.getElementById("win");
                if(temp!=null) document.body.removeChild(temp);
            }
        }
        function endl(){
            document.body.appendChild(document.createElement("br"));
        }
        function change(e){
            if(e.style.backgroundColor == 'white')
                e.style.backgroundColor = 'cyan';
            else
                e.style.backgroundColor = 'white';
        }
        const body_css = document.body.style;
        body_css.textAlign = "center";
        body_css.fontFamily = "patrick hand";
        body_css.background = "#FFF"
    </script>
</body>

</html>